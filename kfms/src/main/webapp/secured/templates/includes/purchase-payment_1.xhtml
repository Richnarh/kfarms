<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">  

    <div class="row">

        <div class="col-lg-3">
            <h:form id="purchasePaymentForm" >
                <h:panelGrid columns="2" styleClass="spaced-form" >                                                

                    <span>Ref. No.</span>
                    <p:inputText value="#{purchaseController.purchasePayment.paymentNo}"  />

                    <span>Account</span>
                    <p:selectOneMenu value="#{purchaseController.purchasePayment.account}" >
                        <f:selectItem itemLabel="#{msg.choose}" />
                        <f:selectItems value="#{commonClass.accountList}" />
                    </p:selectOneMenu>

                    <span>Date</span>
                    <p:datePicker value="#{purchaseController.purchasePayment.paymentDate}" required="true"
                                  yearNavigator="true" monthNavigator="true"
                                  pattern="#{msg.formatted_date}"/>

                    <span>#{msg.amount}</span>
                    <p:inputText value="#{purchaseController.purchasePayment.totalAmount}"  />

                </h:panelGrid> 

                <center>
                    <p:commandButton value="#{msg.save}" styleClass="kbtn-success"
                                     action="#{purchaseController.savePurchasePayment()}" 
                                     update=":purchasePaymentTable, @form"/>

                    <p:commandButton value="#{msg.clear}" styleClass="kbtn-cancel"
                                     action="#{purchaseController.clearPurchasePayment()}" 
                                     immediate="true" update="@form"/>
                </center>
            </h:form>
        </div>
        <div class="col-lg-9">

            <h:form id="purchasePaymentTable">
                <p:dataTable value="#{purchaseController.purchasePaymentList}" var="purchasePayment" 
                             paginator="true" paginatorPosition="bottom" rows="5">

                    <p:column headerText="Payment #{msg.date}">
                        <h:outputText value="#{purchasePayment.paymentDate}">
                            <f:convertDateTime pattern="#{msg.formatted_date}" type="localDate"/>
                        </h:outputText>
                    </p:column>
                    
                    <p:column headerText="Cheque/Ref No.">
                        #{purchasePayment.paymentNo}
                    </p:column>
                    
                    <p:column headerText="Account">
                        #{purchasePayment.account}
                    </p:column>
                    
                    <p:column headerText="#{msg.amount}" class="text-right">
                        <h:outputText value="#{purchasePayment.totalAmount}">
                            <f:convertNumber pattern="#,##0.00" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="#{msg.action}">
                        <p:commandButton value="#{msg.edit}" styleClass="kbtn-info"
                                       action="#{purchaseController.editPurchasePayment(purchasePayment)}" 
                                       ajax="true" update=":mainPanel"/>
                    </p:column>
                    <p:column headerText="#{msg.action}">
                        <p:commandButton styleClass="kbtn-danger" value="#{msg.delete}" 
                                       action="#{purchaseController.deletePurchasePayment(purchasePayment)}" 
                                        update=":mainPanel"  
                                       onclick="return confirm('#{msg.delete_message}')"/>
                    </p:column>
                </p:dataTable>


                <center>
                    <br/>
                    <p:commandButton value="#{msg.close}" action="#{purchaseController.close()}" 
                                     styleClass="kbtn-danger" update=":mainPanel"/>
                </center>

            </h:form>
        </div>





    </div>
</html>

